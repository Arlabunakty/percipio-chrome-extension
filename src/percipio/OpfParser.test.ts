import parser from "./OpfParser";
import fs from "fs";

test("parsing", async () => {
    const example = fs.readFileSync("./src/percipio/example.opf", 'utf8');

    const opf = parser.parse(example);
    
    expect(opf.isbn).toEqual("9781484269718");
    expect(opf.links).toEqual([
        "toc.ncx",
        "toc.xhtml",
        "docbook-epub.css",
        "book-0.xhtml",
        "preface-1.xhtml",
        "preface-2.xhtml",
        "preface-3.xhtml",
        "section-4.xhtml",
        "chapter-1-5.xhtml",
        "section-6.xhtml",
        "section-7.xhtml",
        "section-8.xhtml",
        "section-9.xhtml",
        "chapter-2-10.xhtml",
        "section-11.xhtml",
        "section-12.xhtml",
        "section-13.xhtml",
        "section-14.xhtml",
        "section-15.xhtml",
        "chapter-3-16.xhtml",
        "section-17.xhtml",
        "section-18.xhtml",
        "section-19.xhtml",
        "section-20.xhtml",
        "chapter-4-21.xhtml",
        "section-22.xhtml",
        "section-23.xhtml",
        "section-24.xhtml",
        "chapter-5-25.xhtml",
        "section-26.xhtml",
        "section-27.xhtml",
        "section-28.xhtml",
        "chapter-6-29.xhtml",
        "section-30.xhtml",
        "section-31.xhtml",
        "section-32.xhtml",
        "section-33.xhtml",
        "section-34.xhtml",
        "section-35.xhtml",
        "section-36.xhtml",
        "chapter-7-37.xhtml",
        "section-38.xhtml",
        "section-39.xhtml",
        "section-40.xhtml",
        "chapter-8-41.xhtml",
        "section-42.xhtml",
        "section-43.xhtml",
        "section-44.xhtml",
        "section-45.xhtml",
        "section-46.xhtml",
        "section-47.xhtml",
        "section-48.xhtml",
        "section-49.xhtml",
        "section-50.xhtml",
        "section-51.xhtml",
        "chapter-9-52.xhtml",
        "section-53.xhtml",
        "section-54.xhtml",
        "section-55.xhtml",
        "section-56.xhtml",
        "chapter-10-57.xhtml",
        "section-58.xhtml",
        "section-59.xhtml",
        "section-60.xhtml",
        "section-61.xhtml",
        "appendix-A-62.xhtml",
        "section-63.xhtml",
        "section-64.xhtml",
        "appendix-B-65.xhtml",
        "section-66.xhtml",
        "index-67.xhtml",
        "appendix-68.xhtml",
        "appendix-69.xhtml",
        "../images/510354_1_en_bookfrontmatter_figb_html.jpg",
        "../images/510354_1_en_bookfrontmatter_figc_html.jpg",
        "../images/510354_1_en_1_fig1_html_0.jpg",
        "../images/510354_1_en_1_fig2_html_0.jpg",
        "../images/510354_1_en_1_fig3_html_0.jpg",
        "../images/510354_1_en_1_fig4_html_0.jpg",
        "../images/ch02_ineqn01.jpg",
        "../images/510354_1_en_2_fig1_html_0.jpg",
        "../images/510354_1_en_3_fig1_html_0.jpg",
        "../images/510354_1_en_4_fig1_html_0.jpg",
        "../images/510354_1_en_4_fig2_html_0.jpg",
        "../images/510354_1_en_4_fig3_html_0.jpg",
        "../images/510354_1_en_4_fig4_html_0.jpg",
        "../images/510354_1_en_4_fig5_html_0.jpg",
        "../images/510354_1_en_4_fig6_html_0.jpg",
        "../images/510354_1_en_4_fig7_html_0.jpg",
        "../images/510354_1_en_5_fig1_html_0.jpg",
        "../images/510354_1_en_5_fig2_html_0.jpg",
        "../images/510354_1_en_5_fig3_html_0.jpg",
        "../images/510354_1_en_5_fig4_html_0.jpg",
        "../images/510354_1_en_6_fig1_html_0.jpg",
        "../images/510354_1_en_6_fig2_html_0.jpg",
        "../images/510354_1_en_6_fig3_html_0.jpg",
        "../images/510354_1_en_6_fig4_html_0.jpg",
        "../images/510354_1_en_6_fig5_html_0.jpg",
        "../images/510354_1_en_7_fig1_html_0.jpg",
        "../images/510354_1_en_7_fig2_html_0.jpg",
        "../images/510354_1_en_8_fig1_html_0.jpg",
        "../images/510354_1_en_8_fig2_html_0.jpg",
        "../images/510354_1_en_8_fig3_html_0.jpg",
        "../images/510354_1_en_9_fig1_html_0.jpg",
        "../images/510354_1_en_9_fig2_html_0.jpg",
        "../images/510354_1_en_9_fig3_html_0.jpg",
        "../images/510354_1_en_9_fig4_html_0.jpg",
        "../images/510354_1_en_10_fig1_html_0.jpg",
        "../images/510354_1_en_10_fig2_html_0.jpg",
        "../images/appa_fig1_html_0.jpg",
        "../images/appa_fig2_html_0.jpg",
        "../images/appb_fig1_html_0.jpg",
        "../images/appb_fig2_html_0.jpg"]);
});